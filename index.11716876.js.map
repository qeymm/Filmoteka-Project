{"mappings":"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","sources":["src/js/search.js","src/js/pagination.js","src/js/render-movie-cards.js","src/js/genres.json","src/js/create-movie-markup.js","src/js/filter.js","src/js/debounce.js"],"sourcesContent":["import { API_KEY, SEARCH_URL, BASE_URL } from './api/api-vars';\nimport { getMovies } from './api/fetch-movie.js';\nimport { renderPagination, paginationWrapRef } from './pagination';\nimport { renderMovieCards } from './render-movie-cards';\nimport { filter, toTrendingBtn, toTrendingBtnClick } from './filter';\nimport { debounce } from './debounce';\nimport { startLoader, stopLoader } from './loader';\nimport { hideSlider, showSlider } from './slider';\n\nconst refs = {\n  form: document.querySelector('.header__form'),\n  input: document.querySelector('.header__form-input'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.backdrop-loader'),\n  failSearchText: document.querySelector('.not-succesful-search-text'),\n};\n\nexport function searchMovies(searchText) {\n  const searchUrl = `${SEARCH_URL}&query=${searchText}`;\n  localStorage.setItem('LAST_REQUESTED_URL', searchUrl);\n  return getMovies(searchUrl);\n}\n\nlet searchText = '';\n\n// Search by submit\n\nexport async function onFormSubmit(e) {\n  e.preventDefault();\n\n  searchText = e.currentTarget.query.value.trim();\n\n  if (searchText === '') {\n    return;\n  }\n\n  if (paginationWrapRef) {\n    paginationWrapRef.classList.add('visually-hidden');\n  }\n\n  setTimeout(() => { e.target.reset(); }, 700);\n\n  if (filter) filter.classList.add('is-hidden');\n  if (toTrendingBtn) toTrendingBtn.classList.remove('is-hidden');\n\n  hideSlider();\n\n  clearGallery();\n\n  startLoader();\n\n  try {\n    const movie = await searchMovies(searchText);\n\n    if (!movie || !movie.total_results) {\n      if (refs.failSearchText) {\n        refs.failSearchText.classList.remove('visually-hidden');\n      }\n      stopLoader();\n      return;\n    }\n\n    renderMovieCards(movie.results);\n    renderPagination(movie.page, movie.total_pages);\n    if (paginationWrapRef) {\n      paginationWrapRef.classList.remove('visually-hidden');\n    }\n    stopLoader();\n  } catch (error) {\n    console.error('Error searching movies:', error);\n    stopLoader();\n  }\n}\n\nfunction clearGallery() {\n  if (refs.gallery) {\n    refs.gallery.innerHTML = '';\n  }\n}\n\n// Search by input\n\nconst DEBOUNCE_DELAY = 700;\n\n// Only add event listeners if elements exist\nif (refs.form) {\n  refs.form.addEventListener('submit', onFormSubmit);\n}\n\nif (refs.input) {\n  refs.input.addEventListener('input', debounce(onInputText, DEBOUNCE_DELAY));\n}\n\nasync function onInputText(e) {\n  searchText = e.target.value.trim();\n  hideSlider();\n  if (searchText === '') {\n    toTrendingBtnClick();\n    return;\n  }\n  \n  if (paginationWrapRef) {\n    paginationWrapRef.classList.add('visually-hidden');\n  }\n\n  startLoader();\n\n  if (filter) filter.classList.add('is-hidden');\n  if (toTrendingBtn) toTrendingBtn.classList.remove('is-hidden');\n  if (refs.failSearchText) {\n    refs.failSearchText.classList.add('visually-hidden');\n  }\n\n  clearGallery();\n\n  try {\n    const movie = await searchMovies(searchText);\n\n    if (!movie || !movie.total_results) {\n      if (paginationWrapRef) {\n        paginationWrapRef.classList.add('visually-hidden');\n      }\n      if (refs.failSearchText) {\n        refs.failSearchText.classList.remove('visually-hidden');\n      }\n      stopLoader(); \n      return;\n    }\n\n    renderMovieCards(movie.results);\n    renderPagination(movie.page, movie.total_pages);\n    if (paginationWrapRef) {\n      paginationWrapRef.classList.remove('visually-hidden');\n    }\n    stopLoader();\n  } catch (error) {\n    console.error('Error searching movies:', error);\n    stopLoader();\n  }\n}\n","import { getMovies } from './api/fetch-movie';\nimport { renderMovieCards } from './render-movie-cards';\nimport { topFunction } from './scroll-up';\nimport { startLoader, stopLoader } from './loader';\nimport { adRandomizer } from './render-movie-cards';\n\nexport const paginationWrapRef = document.querySelector('.pagination-wrap');\n\nexport function renderPagination(currentPage, totalPages) {\n  let buttons = [];\n\n  if (currentPage > 1) {\n    buttons.push(createButton(currentPage - 1, true, 'arrow-left'));\n  }\n\n  if (currentPage >= 4) {\n    buttons.push(createButton(1, true, 'first-button'));\n  }\n\n  if (currentPage >= 5) {\n    buttons.push(createDotsEl());\n  }\n\n  if (currentPage >= 2) {\n    if (currentPage >= 3) {\n      buttons.push(createButton(currentPage - 2));\n    }\n    buttons.push(createButton(currentPage - 1));\n  }\n\n  buttons.push(createButton(currentPage, false));\n\n  if (currentPage <= totalPages - 1) {\n    buttons.push(createButton(currentPage + 1));\n    if (currentPage <= totalPages - 2) {\n      buttons.push(createButton(currentPage + 2));\n    }\n  }\n\n  if (currentPage < totalPages - 3) {\n    buttons.push(createDotsEl());\n  }\n\n  if (currentPage <= totalPages - 3) {\n    buttons.push(createButton(totalPages, true, 'last-button'));\n  }\n\n  if (currentPage < totalPages) {\n    buttons.push(createButton(currentPage + 1, true, 'arrow-right'));\n  }\n\n  paginationWrapRef.innerHTML = '';\n\n  buttons.forEach(button => paginationWrapRef.append(button));\n}\n\nfunction createBaseButton() {\n  const baseButton = document.createElement('button');\n  baseButton.classList.add('pagination-button');\n  return baseButton;\n}\n\nfunction createDotsEl() {\n  const newDotsEl = document.createElement('span');\n  newDotsEl.innerHTML = `<span class=\"dots\">...</span>`;\n  return newDotsEl;\n}\n\nfunction createButton(\n  pageNum,\n  isButtonClickable = true,\n  additionalClass = null\n) {\n  const newButton = createBaseButton();\n  newButton.dataset['page'] = pageNum;\n  newButton.textContent =\n    additionalClass && additionalClass.includes('arrow') ? '' : pageNum;\n\n  if (additionalClass) {\n    newButton.classList.add(additionalClass);\n  }\n\n  if (isButtonClickable) {\n    newButton.addEventListener('click', pageButtonPressed);\n  } else {\n    newButton.classList.add('pagination-button--current');\n  }\n\n  return newButton;\n}\n\nasync function pageButtonPressed(event) {\n  const page = event.target.dataset.page;\n  const lastUrl = localStorage.getItem('LAST_REQUESTED_URL');\n  const newUrl = `${lastUrl}&page=${page}`;\n\n  startLoader();\n  topFunction();\n\n  try {\n    const response = await getMovies(newUrl);\n    if (response && response.results) {\n      renderMovieCards(response.results);\n      adRandomizer();\n      renderPagination(response.page, response.total_pages);\n    }\n  } catch (error) {\n    console.error('Error fetching movies for pagination:', error);\n  } finally {\n    stopLoader();\n  }\n}\n","import { getMovies } from './api/fetch-movie';\nimport { createMovieMarkup } from './create-movie-markup';\nimport { TREND_DAY_URL } from './api/api-vars';\nimport { renderPagination } from './pagination.js';\nimport { startLoader, stopLoader } from './loader';\n\nconst gallery = document.querySelector('.gallery');\n\nstartLoader();\n\n(async () => {\n  try {\n    const trendMoviesList = await getMovies(TREND_DAY_URL);\n    \n    if (trendMoviesList && trendMoviesList.results) {\n      await renderMovieCards(trendMoviesList.results);\n      addAd();\n      localStorage.setItem('LAST_REQUESTED_URL', TREND_DAY_URL);\n      renderPagination(trendMoviesList.page, trendMoviesList.total_pages);\n    } else {\n      console.warn('No movie data received from API');\n    }\n  } catch (error) {\n    console.error('Error loading trending movies:', error);\n  } finally {\n    stopLoader();\n  }\n})();\n\nexport function renderMovieCards(movies) {\n  if (!movies || !Array.isArray(movies)) {\n    console.warn('Invalid movies data provided to renderMovieCards');\n    return;\n  }\n  \n  const movieGalleryMarkup = movies\n    .map(movie => createMovieMarkup(movie))\n    .join('');\n\n  if (gallery) {\n    gallery.innerHTML = movieGalleryMarkup;\n  } else {\n    console.warn('Gallery element not found');\n  }\n}\n\nexport function addAd() {\n  const gallery = document.querySelector('.gallery');\n  if (!gallery) return;\n  \n  const adCard = `<li class=\"ad-card\">\n            <a class=\"gallery__link ad-card-link\" href=\"#\">\n              <div class=\"gallery__image ad-card-content-wrapper\">\n                <p class=\"ad-title\">Here you can place your ad</p>\n                <div class=\"ad-content\">\n                  <p class=\"ad-text\">Sell your car</br>Cheap</p>\n                  <p class=\"ad-number\">000-000-00-00</br>John Doe</p>\n                </div>\n              </div>\n            </a>\n          </li>`;\n\n  gallery.insertAdjacentHTML('beforeEnd', adCard);\n}\n\nexport function addAdCar() {\n  const gallery = document.querySelector('.gallery');\n  if (!gallery) return;\n  \n  const adCard = `<li class=\"ad-card\">\n            <a class=\"gallery__link ad-card-link\" href=\"#\">\n              <div class=\"gallery__image ad-card-content-wrapper\">\n                <p class=\"ad-title\">Here you can place your ad</p>\n                <div class=\"ad-content\">\n                  <p class=\"ad-text\">Sell your BMW X5</br>Not stolen</br>Not repainted</p>\n                  <p class=\"ad-number\">000-000-00-00</br>John Doe</p>\n                </div>\n              </div>\n            </a>\n          </li>`;\n\n  gallery.insertAdjacentHTML('beforeEnd', adCard);\n}\n\nexport function adRandomizer() {\n  const gallery = document.querySelector('.gallery');\n  if (!gallery) return;\n  \n  const random = Math.random() * (10 - 1) + 1;\n  if (random >= 5) {\n    addAd();\n  } else {\n    addAdCar();\n  }\n}\n","{\n  \"genres\": [\n    { \"id\": 28, \"name\": \"Action\" },\n    { \"id\": 12, \"name\": \"Adventure\" },\n    { \"id\": 16, \"name\": \"Animation\" },\n    { \"id\": 35, \"name\": \"Comedy\" },\n    { \"id\": 80, \"name\": \"Crime\" },\n    { \"id\": 99, \"name\": \"Documentary\" },\n    { \"id\": 18, \"name\": \"Drama\" },\n    { \"id\": 10751, \"name\": \"Family\" },\n    { \"id\": 14, \"name\": \"Fantasy\" },\n    { \"id\": 36, \"name\": \"History\" },\n    { \"id\": 27, \"name\": \"Horror\" },\n    { \"id\": 10402, \"name\": \"Music\" },\n    { \"id\": 9648, \"name\": \"Mystery\" },\n    { \"id\": 10749, \"name\": \"Romance\" },\n    { \"id\": 878, \"name\": \"Science Fiction\" },\n    { \"id\": 10770, \"name\": \"TV Movie\" },\n    { \"id\": 53, \"name\": \"Thriller\" },\n    { \"id\": 10752, \"name\": \"War\" },\n    { \"id\": 37, \"name\": \"Western\" }\n  ]\n}","import { genres } from './genres.json';\nimport { BASE_IMG_URL } from './api/api-vars';\n\nexport function createMovieMarkup(movie) {\n  const { title, genre_ids, release_date, poster_path, id } = movie;\n\n  let year = '';\n  if (typeof release_date !== 'undefined' && release_date.length > 4) {\n    year = release_date.slice(0, 4);\n  }\n\n  const movieGenresList = getMovieGenresList(genre_ids).join(', ');\n\n  if (poster_path === null) {\n    return `<li>\n            <a class=\"gallery__link\" href=\"#\">\n              <img class=\"gallery__image\" data-id=\"${id}\" src=\"https://dummyimage.com/395x574/000/fff.jpg&text=no+poster\" alt=\"${title} movie poster\" loading=\"lazy\">\n            \n            <div class=\"info\">\n              <p class=\"info__item\">${title}</p>\n              <div class=\"info-detail\">\n                <p class=\"info-detail__item\">${movieGenresList}</p>\n                <p class=\"info-detail__item\">${year}</p>\n              </div>\n            </div>\n            </a>\n          </li>`;\n  }\n\n  return `<li>\n            <a class=\"gallery__link\" href=\"#\">\n              <img class=\"gallery__image\" data-id=\"${id}\" src=\"${BASE_IMG_URL}${poster_path}\" alt=\"${title} movie poster\" loading=\"lazy\">\n            \n            <div class=\"info\">\n              <h3 class=\"info__item\">${title}</h3>\n              <div class=\"info-detail\">\n                <p class=\"info-detail__item\">${movieGenresList}</p>\n                <p class=\"info-detail__item\">${year}</p>\n              </div>\n            </div>\n            </a>\n          </li>`;\n}\n\nexport function getMovieGenresList(genresIdsList) {\n  let movieGenres = genres.reduce((acc, { id, name }) => {\n    if (genresIdsList.includes(id)) {\n      acc.push(name);\n    }\n    return acc;\n  }, []);\n  if (movieGenres.length > 3) {\n    movieGenres = movieGenres.slice(0, 2);\n    movieGenres.push('Other');\n  }\n  return movieGenres;\n}\n","import { renderMovieCards } from './render-movie-cards';\nimport { getMovies } from './api/fetch-movie';\nimport { API_KEY, BASE_URL } from './api/api-vars';\nimport { paginationWrapRef } from './pagination';\nimport { startLoader, stopLoader } from './loader';\nimport { adRandomizer } from './render-movie-cards';\nimport { showSlider } from './slider';\n\nconst refs = {\n  btnToday: document.querySelector('button[data-group=\"today\"]'),\n  filterBg: document.querySelector('.background__filter'),\n  btnWeek: document.querySelector('button[data-group=\"week\"]'),\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('.header__form'),\n  filter: document.querySelector('.filter'),\n  toTrendingBtn: document.querySelector('.to-trending__button'),\n  failSearchText: document.querySelector('.not-succesful-search-text'),\n};\n\nexport const {\n  btnToday,\n  filterBg,\n  btnWeek,\n  gallery,\n  form,\n  filter,\n  toTrendingBtn,\n  failSearchText,\n} = refs;\nlet anchorNodeToday = btnToday.parentNode.parentNode;\nlet anchorNodeWeek = btnWeek.parentNode.parentNode;\n\nlet page = 1;\n\n// Only add event listeners if elements exist\nif (toTrendingBtn) {\n  toTrendingBtn.addEventListener('click', toTrendingBtnClick);\n}\n\nif (btnToday) {\n  btnToday.addEventListener('click', async () => {\n    const currentPageElement = document.querySelector('.pagination-button--current');\n    page = currentPageElement ? currentPageElement.dataset.page : 1;\n    const TREND_URL_DAY = `${BASE_URL}/trending/movie/day?api_key=${API_KEY}`;\n    if (anchorNodeToday.classList.contains('.selected')) {\n      return;\n    } else {\n      startLoader();\n      anchorNodeToday.classList.add('.selected');\n      anchorNodeWeek.classList.remove('.selected');\n      if (filterBg) filterBg.classList.remove('to-right');\n      localStorage.setItem('LAST_REQUESTED_URL', TREND_URL_DAY);\n      await renderMovies(TREND_URL_DAY + `&page=${page}`);\n      setTimeout(() => {\n        stopLoader();\n      }, 200);\n    }\n  });\n}\n\nif (btnWeek) {\n  btnWeek.addEventListener('click', async () => {\n    const currentPageElement = document.querySelector('.pagination-button--current');\n    page = currentPageElement ? currentPageElement.dataset.page : 1;\n    const TREND_URL_WEEK = `${BASE_URL}/trending/movie/week?api_key=${API_KEY}`;\n    if (anchorNodeWeek.classList.contains('.selected')) {\n      return;\n    } else {\n      startLoader();\n      anchorNodeToday.classList.remove('.selected');\n      anchorNodeWeek.classList.add('.selected');\n      if (filterBg) filterBg.classList.add('to-right');\n      localStorage.setItem('LAST_REQUESTED_URL', TREND_URL_WEEK);\n      await renderMovies(TREND_URL_WEEK + `&page=${page}`);\n      setTimeout(() => {\n        stopLoader();\n      }, 200);\n    }\n  });\n}\n\nexport function renderMovies(url) {\n  getMovies(url).then(response => {\n    if (response && response.results) {\n      renderMovieCards(response.results);\n      adRandomizer();\n    }\n  }).catch(error => {\n    console.error('Error rendering movies:', error);\n  });\n}\n\nexport async function toTrendingBtnClick() {\n  const currentPageElement = document.querySelector('.pagination-button--current');\n  page = currentPageElement ? currentPageElement.dataset.page : 1;\n\n  const TREND_URL_DAY = `${BASE_URL}/trending/movie/day?api_key=${API_KEY}`;\n\n  showSlider();\n  if (filter) filter.classList.remove('is-hidden');\n  if (toTrendingBtn) toTrendingBtn.classList.add('is-hidden');\n  if (form) form.reset();\n\n  if (anchorNodeWeek.classList.contains('.selected')) {\n    return;\n  } else {\n    startLoader();\n    anchorNodeWeek.classList.remove('.selected');\n    anchorNodeToday.classList.add('.selected');\n    if (filterBg) filterBg.classList.remove('to-right');\n    localStorage.setItem('LAST_REQUESTED_URL', TREND_URL_DAY);\n    await renderMovies(TREND_URL_DAY + `&page=${page}`);\n    if (paginationWrapRef) paginationWrapRef.classList.remove('visually-hidden');\n    if (failSearchText) failSearchText.classList.add('visually-hidden');\n    setTimeout(() => {\n      stopLoader();\n    }, 200);\n  }\n}\n","export function debounce(func, wait, options) {\n  let lastArgs,\n    lastThis,\n    maxWait,\n    result,\n    timerId,\n    lastCallTime,\n    lastInvokeTime = 0,\n    leading = false,\n    maxing = false,\n    trailing = true;\n  if (typeof func !== 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = Number(wait) || 0;\n  if (typeof options === 'object') {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(Number(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    let args = lastArgs,\n      thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    lastInvokeTime = time;\n    timerId = setTimeout(timerExpired, wait);\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    let timeSinceLastCall = time - lastCallTime,\n      timeSinceLastInvoke = time - lastInvokeTime,\n      result = wait - timeSinceLastCall;\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    let timeSinceLastCall = time - lastCallTime,\n      timeSinceLastInvoke = time - lastInvokeTime;\n    return (\n      lastCallTime === undefined ||\n      timeSinceLastCall >= wait ||\n      timeSinceLastCall < 0 ||\n      (maxing && timeSinceLastInvoke >= maxWait)\n    );\n  }\n\n  function timerExpired() {\n    const time = Date.now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(Date.now());\n  }\n\n  function debounced() {\n    let time = Date.now(),\n      isInvoking = shouldInvoke(time);\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n"],"names":["$edYM8","parcelRequire","$gWoIc","$1a18d98a372d8e28$exports","JSON","parse","$0eb172ba7d82ec3b$export$8a980da361a674f","movie","title","genre_ids","release_date","poster_path","id","year","length","slice","movieGenresList","genresIdsList","movieGenres","genres","reduce","acc","name","includes","push","$0eb172ba7d82ec3b$export$e06660f04e0d4ab0","join","BASE_IMG_URL","$662e245138d28e1d$var$gallery","document","querySelector","$662e245138d28e1d$export$bc472845f7b7844b","movies","Array","isArray","console","warn","movieGalleryMarkup","map","innerHTML","$662e245138d28e1d$export$4dbb76ef90d3dbc4","gallery1","insertAdjacentHTML","$662e245138d28e1d$export$1d84fcb835b2f210","Math","random","gallery2","$662e245138d28e1d$export$f27d9f2731bf26b2","$gjiCh","startLoader","trendMoviesList","getMovies","TREND_DAY_URL","results","localStorage","setItem","$1bab9c519cfa82bc$export$825408fbca4f2040","page","total_pages","error","stopLoader","$1bab9c519cfa82bc$export$f1808d22cd0973ab","currentPage","totalPages","buttons","$1bab9c519cfa82bc$var$createButton","$1bab9c519cfa82bc$var$createDotsEl","forEach","button","append","newDotsEl","createElement","pageNum","isButtonClickable","additionalClass","newButton","baseButton","classList","add","$1bab9c519cfa82bc$var$createBaseButton","dataset","textContent","addEventListener","$1bab9c519cfa82bc$var$pageButtonPressed","async","event","target","newUrl","getItem","$74Aiq","topFunction","response","$cc8167df025acb14$var$refs","btnToday","filterBg","btnWeek","gallery","form","filter","toTrendingBtn","failSearchText","$cc8167df025acb14$export$97ff2b3fc67ac431","$cc8167df025acb14$export$c8a705d84b3aa380","$cc8167df025acb14$export$c0fb77532349e8a4","$cc8167df025acb14$export$b21c1b4271bdbe93","$cc8167df025acb14$export$6210fa4921d2a466","$cc8167df025acb14$export$3dea766d36a8935f","$cc8167df025acb14$export$16b30f7ddc7bd7c9","$cc8167df025acb14$export$5932c8d8532e170e","$cc8167df025acb14$var$anchorNodeToday","parentNode","$cc8167df025acb14$var$anchorNodeWeek","$cc8167df025acb14$var$page","$cc8167df025acb14$export$1a30573fde3dfc62","url","then","catch","$cc8167df025acb14$export$517aecebd478404c","currentPageElement","TREND_URL_DAY","BASE_URL","API_KEY","$7tzR7","showSlider","remove","reset","contains","setTimeout","TREND_URL_WEEK","$b18fd23e9761f35d$var$refs","input","loader","$b18fd23e9761f35d$export$b0c4d3ac9887d994","searchText1","searchUrl","SEARCH_URL","$b18fd23e9761f35d$var$searchText","$b18fd23e9761f35d$var$clearGallery","e","preventDefault","currentTarget","query","value","trim","hideSlider","total_results","func","wait","options","lastArgs","lastThis","maxWait","result1","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","FUNC_ERROR_TEXT","invokeFunc","time","args","thisArg","undefined","apply","shouldInvoke","timeSinceLastCall","timerExpired","Date","now","trailingEdge","result","nativeMin","remainingWait","debounced","isInvoking","arguments","this","leadingEdge","Number","nativeMax","cancel","clearTimeout","flush"],"version":3,"file":"index.11716876.js.map"}